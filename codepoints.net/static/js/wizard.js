!function(){"use strict";function a(a){var b,c=Array.prototype.slice.call(arguments,1);f in e.catalog&&a in e.catalog[f]&&(a=e.catalog[f][a]);for(;c.length;)b=c.shift(),a=a.replace(/%s/,b);return a}function b(a,b,c){var d=this;d.id=a,d.text=b,d.prev=null,d.next={},d.answers=c||{},d.selected=null,d.html=null}function c(b){b.html.trigger("question.finish",b);var c={_wizard:1},d=b,e=0,f=$('<fieldset id="wizard_finish"><legend>'+a("Finished!")+"</legend></fieldset>");for(null!==b.selected&&(c[b.id]=b.selected,e+=1);d.prev;)d=d.prev,c[d.id]=d.selected,e+=1;g.container.addClass("finished"),f.append($("<p></p>").text(a("Please wait a second, we’re making those %s answers productive.",e)).prepend('<img src="/static/images/ajax.gif" alt="" width="16" height="16"/> ')),$("#wizard_now").fadeOut("fast"),b.html.fadeOut("fast",function(){f.hide().insertAfter(b.html).fadeIn("fast"),b.html.detach()}),window.location.href="?"+$.param(c)}function d(b,d){var e=$('<ol class="wizcount"/>');g.current=d,g.container=b,b.empty().append(e).append(d.render()).one("question.answered",function(){$(this).after($('<p class="buttonset" id="wizard_now"><button type="button">'+a("Enough questions! Search now.")+"</button></p>").find("button").on("click",function(){c(g.current)}).end().hide().slideDown())}).on("question.answered",function(a,c){e.append($("<li></li>").attr("title",c.text).tooltip().html(c.answers[c.selected]).hide().slideDown().on("click",function(){if(b.is(".finished"))return!1;var a=g.current,d=$(this);d.add(d.nextAll("li")).remove(),g.current=c,c.render().hide().insertAfter(a.html).fadeIn("fast"),a.html.detach()}))})}var e,f=document.documentElement.getAttribute("lang");e="gettext"in window?window.gettext:{catalog:{}};var g={current:null,addAnswer:function(a,b,c){this.answers[a]=b||a,this.next[a]=c},setNextForAnswer:function(a,b){this.next[a]=b},render:function(){if(!this.html){var a=this,b=0;a.html=$('<fieldset id="'+a.id+'" class="question"></fieldset>').append("<legend>"+a.text+"</legend>").data("q",a),$.each(a.answers,function(c,d){if(b+=1,"_number"===c){var e=$('<input type="number"/>').val(d[1]||0),f=$("<div></div>").slider({min:d[1]||0,max:d[2]||100,change:function(){e.val($(this).slider("value"))},slide:function(){e.val($(this).slider("value"))}});a.html.append($('<div class="number"><p></p><p><button type="button"></button></p></div>').addClass("answer answer_"+b).find("button").html(d[0]).on("click tap",function(){a.select(f.slider("value"),a.next[c])}).end().find("p:eq(0)").append(e).append(f).end())}else if("_text"===c){var g=$('<input type="text"/>').on("keypress",function(a){return 13===a.which?($(this).next().click(),!1):void 0});a.html.append($('<p class="text"><button type="button"></button></p>').find("button").html(d).before(g).on("click tap",function(){a.select(g.val(),a.next[c])}).end().addClass("answer answer_"+b))}else a.html.append($('<p><button type="button"></button></p>').find("button").html(d).on("click tap",function(){a.select(c,a.next[c])}).end().addClass("answer answer_"+b))})}return this.html},select:function(a,b){var d=this;d.selected=a,d.html.trigger("question.answered",d),b?(d.html.fadeOut("fast",function(){var a=b.render();g.current=b,a.trigger("question.next",{prev:d,next:b}),a.hide().insertAfter(d.html).fadeIn("fast"),d.html.detach()}),b.prev=d):c(d)}};b.prototype=g;var h=(new b("swallow",a("What’s the airspeed velocity of an unladen swallow?"),{1:a("An African, or"),2:a("A European Swallow?")}),new b("region",a("Where does the character appear usually?"),{Africa:a("Africa <small>(without Arabic)</small>"),America:a("America <small>(originally, <i>e. g.</i> Cherokee, not Latin)</small>"),Europe:a("Europe <small>(Latin, Cyrillic, …)</small>"),Middle_East:a("Middle East"),Central_Asia:a("Central Asia"),East_Asia:a("East Asia <small>(Chinese, Korean, Japanese, …)</small>"),South_Asia:a("South Asia <small>(Indian)</small>"),"Southeast Asia":a("Southeast Asia <small>(Thai, Khmer, …)</small>"),Philippines:a("Philippines, Indonesia, Oceania"),n:a("Nowhere specific"),"":a("I don’t know")})),i=new b("number",a("Is it a number of any kind?"),{1:a("Yes"),0:a("No"),"":a("I don’t know")}),j=new b("case",a("Has the character a case (upper, lower, title)?"),{l:a("Yes, it’s lowercase"),u:a("Yes, it’s uppercase"),t:a("Yes, it’s titlecase"),y:a("Yes, but I don’t know the case"),n:a("No, it’s uncased"),"":a("I don’t know")}),k=new b("symbol",a("Is the character some kind of symbol or dingbat?"),{s:a("Yes <small>(It isn’t part of usually written text)</small>"),c:a("No <small>(But it is some kind of control character)</small>"),t:a("No <small>(It may appear in text, like letters or punctuation)</small>"),"":a("I don’t know")}),l=new b("punctuation",a("Is the character some kind of punctuation?"),{1:a("Yes"),0:a("No"),"":a("I don’t know")}),m=new b("incomplete",a("Is the character incomplete on its own, like a diacritic sign?"),{1:a("Yes <small>(It’s usually found together with another character)</small>"),0:a("No <small>(It stands on its own)</small>"),"":a("I don’t know")}),n=new b("composed",a("Is the character composed of two others?"),{1:a("Yes <small>(It is based on two or more other characters)</small>"),2:a("Sort of <small>(It’s got some quiggly lines or dots, like “Ä” or “ٷ”)</small>"),0:a("No <small>(It is a genuine character)</small>"),"":a("I don’t know")}),o=new b("confuse",a("Off the top of your head, can the character be confused with another one?"),{1:a("Yes <small>(Like latin “A” and greek “Α”, alpha)</small>"),"":a("No <small>(I have no such pair in mind)</small>")}),p=new b("archaic",a("Is it an archaic character or is it in use today?"),{1:a("Yep, noone would use that anymore!"),0:a("Nah, seen it yesterday in the newspaper"),"":a("I don’t know")}),q=new b("strokes",a("Do you know the number of strokes the character has?"),{_number:[a("This much"),1,64],"":a("Nope, never counted them")}),r=new b("def",a("Do you happen to know the meaning of the character?"),{_text:a("This is (part of) what I’m looking for"),"":a("I don’t speak that language")});h.setNextForAnswer("Africa",i),h.setNextForAnswer("America",i),h.setNextForAnswer("Europe",i),h.setNextForAnswer("Middle_East",i),h.setNextForAnswer("Central_Asia",i),h.setNextForAnswer("South_Asia",i),h.setNextForAnswer("Southeast_Asia",i),h.setNextForAnswer("Philippines",i),h.setNextForAnswer("n",k),h.setNextForAnswer("",k),h.setNextForAnswer("East_Asia",r),r.setNextForAnswer("_text",q),r.setNextForAnswer("",q),q.setNextForAnswer("_number",n),q.setNextForAnswer("",n),i.setNextForAnswer(0,k),i.setNextForAnswer("",k),k.setNextForAnswer("t",l),k.setNextForAnswer("",l),l.setNextForAnswer(1,p),l.setNextForAnswer(0,j),l.setNextForAnswer("",j),j.setNextForAnswer("l",n),j.setNextForAnswer("u",n),j.setNextForAnswer("t",n),j.setNextForAnswer("y",n),j.setNextForAnswer("n",n),j.setNextForAnswer("",n),n.setNextForAnswer(1,p),n.setNextForAnswer(2,p),n.setNextForAnswer(0,m),n.setNextForAnswer("",m),m.setNextForAnswer(1,p),m.setNextForAnswer(0,p),m.setNextForAnswer("",p),p.setNextForAnswer(1,o),p.setNextForAnswer(0,o),p.setNextForAnswer("",o),d($("#wizard_container"),h)}();