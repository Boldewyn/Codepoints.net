define(["jquery","components/gettext","components/unicodetools"],function(e,t,n){function u(t,n){var r=e("<tr><th></th><td></td></tr>"),i=parseInt(s.find(".repr-number").text(),10);r.find("th").text(t),r.find("td").text(n(i)),s.find("tbody").append(r.hide()),o=o.add(r)}var r=e(".codepoint"),i=t.gettext,s,o;if(r.length){s=e(".representations",r);if(s.length){o=e('tbody tr:not([class~="primary"])',s).hide();var a=e('<p style="text-align:center"><button type="button">'+i("show more")+"</button></p>").on("click",function(){a.find("button").text(o.is(":visible")?i("show more"):i("hide")),o.toggle()}).insertAfter(s);u(i("RFC 5137"),function(e){return"\\u'"+e.toString(16).toUpperCase()+"'"}),u(i("Python"),function(e){var t=e.toString(16).toUpperCase(),n=4,r="u";e>65535&&(n=8,r="U");while(t.length<n)t="0"+t;return"\\"+r+t}),u(i("Ruby"),function(e){return"\\u{"+e.toString(16).toUpperCase()+"}"}),u(i("Perl"),function(e){return'"\\x{'+e.toString(16).toUpperCase()+'}"'}),u(i("JavaScript, JSON and Java"),function(t){return e.map(n.codepoint_to_utf16(t),function(e){return"\\u"+e.toString(16).toUpperCase()}).join("")}),u(i("C"),function(e){var t=e.toString(16).toUpperCase(),n=4,r="u";e>65535&&(n=8,r="U");while(t.length<n)t="0"+t;return"\\"+r+t}),u(i("CSS"),function(e){var t=e.toString(16).toUpperCase();while(t.length<6)t="0"+t;return"\\"+t}),s.on("click","td",function(){var e=document.createRange();e.selectNodeContents(this);var t=window.getSelection();t.removeAllRanges(),t.addRange(e)})}}});