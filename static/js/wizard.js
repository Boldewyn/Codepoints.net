require(["jquery"],function(e){function t(e,t,n){var r=this;r.id=e,r.text=t,r.prev=null,r.next={},r.answers=n||{},r.selected=null,r.html=null}function r(t){t.html.trigger("question.finish",t);var r={_wizard:1},i=t,s=0,o=e('<fieldset id="wizard_finish"><legend>Finished!</legend></fieldset>');t.selected!==null&&(r[t.id]=t.selected,s+=1);while(i.prev)i=i.prev,r[i.id]=i.selected,s+=1;n.container.addClass("finished"),o.append(e("<p></p>").text("Please wait a second, we’re making those "+s+" answers productive.").prepend('<img src="/static/images/ajax.gif" alt="" width="16" height="16"/> ')),e("#wizard_now").fadeOut("fast"),t.html.fadeOut("fast",function(){o.hide().insertAfter(t.html).fadeIn("fast"),t.html.detach(),window.location.href="?"+e.param(r)})}function i(t,i){var s=e('<ol class="wizcount"/>');n.current=i,n.container=t,t.empty().append(s).append(i.render()).one("question.answered",function(){e(this).after(e('<p class="buttonset" id="wizard_now"><button type="button">Enough questions! Search now.</button></p>').find("button").on("click",function(){r(n.current)}).end().hide().slideDown())}).on("question.answered",function(r,i){s.append(e("<li></li>").attr("title",i.text).tooltip().html(i.answers[i.selected]).hide().slideDown().on("click",function(){if(t.is(".finished"))return!1;var r=n.current,s=e(this);s.add(s.nextAll("li")).remove(),n.current=i,i.render().hide().insertAfter(r.html).fadeIn("fast"),r.html.detach()}))})}var n={current:null,addAnswer:function(e,t,n){this.answers[e]=t||e,this.next[e]=n},setNextForAnswer:function(e,t){this.next[e]=t},render:function(){if(!this.html){var t=this,n=0;t.html=e('<fieldset id="'+t.id+'" class="question"></fieldset>').append("<legend>"+t.text+"</legend>").data("q",t),e.each(t.answers,function(r,i){n+=1;if(r==="_number"){var s=e('<input type="number"/>').val(i[1]||0),o=e("<div></div>").slider({min:i[1]||0,max:i[2]||100,change:function(){s.val(e(this).slider("value"))},slide:function(){s.val(e(this).slider("value"))}});t.html.append(e('<div class="number"><p></p><p><button type="button"></button></p></div>').addClass("answer answer_"+n).find("button").html(i[0]).on("click tap",function(){t.select(o.slider("value"),t.next[r])}).end().find("p:eq(0)").append(s).append(o).end())}else if(r==="_text"){var u=e('<input type="text"/>').on("keypress",function(t){if(t.which===13)return e(this).next().click(),!1});t.html.append(e('<p class="text"><button type="button"></button></p>').find("button").html(i).before(u).on("click tap",function(){t.select(u.val(),t.next[r])}).end().addClass("answer answer_"+n))}else t.html.append(e('<p><button type="button"></button></p>').find("button").html(i).on("click tap",function(){t.select(r,t.next[r])}).end().addClass("answer answer_"+n))})}return this.html},select:function(e,t){var i=this;i.selected=e,i.html.trigger("question.answered",i),t?(i.html.fadeOut("fast",function(){var e=t.render();n.current=t,e.trigger("question.next",{prev:i,next:t}),e.hide().insertAfter(i.html).fadeIn("fast"),i.html.detach()}),t.prev=i):r(i)}};t.prototype=n;var s=new t("swallow","What’s the airspeed velocity of an unladen swallow?",{1:"An African, or",2:"A European Swallow?"}),o=new t("region","Where does the character appear usually?",{Africa:"Africa <small>(without Arabic)</small>",America:"America <small>(originally, <i>e. g.</i> Cherokee, not Latin)</small>",Europe:"Europe <small>(Latin, Cyrillic, …)</small>",Middle_East:"Middle East",Central_Asia:"Central Asia",East_Asia:"East Asia <small>(Chinese, Korean, Japanese, …)</small>",South_Asia:"South Asia <small>(Indian)</small>","Southeast Asia":"Southeast Asia <small>(Thai, Khmer, …)</small>",Philippines:"Philippines, Indonesia, Oceania",n:"Nowhere specific","":"I don’t know"}),u=new t("number","Is it a number of any kind?",{1:"Yes",0:"No","":"I don’t know"}),a=new t("case","Has the character a case (upper, lower, title)?",{l:"Yes, it’s lowercase",u:"Yes, it’s uppercase",t:"Yes, it’s titlecase",y:"Yes, but I don’t know the case",n:"No, it’s uncased","":"I don’t know"}),f=new t("symbol","Is the character some kind of symbol or dingbat?",{s:"Yes <small>(It isn’t part of usually written text)</small>",c:"No <small>(But it is some kind of control character)</small>",t:"No <small>(It may appear in text, like letters or punctuation)</small>","":"I don’t know"}),l=new t("punctuation","Is the character some kind of punctuation?",{1:"Yes",0:"No","":"I don’t know"}),c=new t("incomplete","Is the character incomplete on its own, like a diacritic sign?",{1:"Yes <small>(It’s usually found together with another character)</small>",0:"No <small>(It stands on its own)</small>","":"I don’t know"}),h=new t("composed","Is the character composed of two others?",{1:"Yes <small>(It is based on two or more other characters)</small>",2:"Sort of <small>(It’s got some quiggly lines or dots, like “Ä” or “ٷ”)</small>",0:"No <small>(It is a genuine character)</small>","":"I don’t know"}),p=new t("confuse","Off the top of your head, can the character be confused with another one?",{1:"Yes <small>(Like latin “A” and greek “Α”, alpha)</small>","":"No <small>(I have no such pair in mind)</small>"}),d=new t("archaic","Is it an archaic character or is it in use today?",{1:"Yep, noone would use that anymore!",0:"Nah, seen it yesterday in the newspaper","":"I don’t know"}),v=new t("strokes","Do you know the number of strokes the character has?",{_number:["This much",1,64],"":"Nope, never counted them"}),m=new t("def","Do you happen to know the meaning of the character?",{_text:"This is (part of) what I’m looking for","":"I don’t speak that language"});o.setNextForAnswer("Africa",u),o.setNextForAnswer("America",u),o.setNextForAnswer("Europe",u),o.setNextForAnswer("Middle_East",u),o.setNextForAnswer("Central_Asia",u),o.setNextForAnswer("South_Asia",u),o.setNextForAnswer("Southeast_Asia",u),o.setNextForAnswer("Philippines",u),o.setNextForAnswer("n",f),o.setNextForAnswer("",f),o.setNextForAnswer("East_Asia",m),m.setNextForAnswer("_text",v),m.setNextForAnswer("",v),v.setNextForAnswer("_number",h),v.setNextForAnswer("",h),u.setNextForAnswer(0,f),u.setNextForAnswer("",f),f.setNextForAnswer("t",l),f.setNextForAnswer("",l),l.setNextForAnswer(1,d),l.setNextForAnswer(0,a),l.setNextForAnswer("",a),a.setNextForAnswer("l",h),a.setNextForAnswer("u",h),a.setNextForAnswer("t",h),a.setNextForAnswer("y",h),a.setNextForAnswer("n",h),a.setNextForAnswer("",h),h.setNextForAnswer(1,d),h.setNextForAnswer(2,d),h.setNextForAnswer(0,c),h.setNextForAnswer("",c),c.setNextForAnswer(1,d),c.setNextForAnswer(0,d),c.setNextForAnswer("",d),d.setNextForAnswer(1,p),d.setNextForAnswer(0,p),d.setNextForAnswer("",p),i(e("#wizard_container"),o)}),define("wizard",function(){});