(function(a,b,c){function d(a,b,c){var d=this;d.id=a,d.text=b,d.prev=null,d.next={},d.answers=c||{},d.selected=null,d.html=null}function f(c){c.html.trigger("question.finish",c);var d={_wizard:1},f=c,g=0,h=b('<fieldset id="wizard_finish"><legend>Finished!</legend></fieldset>');c.selected!==null&&(d[c.id]=c.selected,g+=1);while(f.prev)f=f.prev,d[f.id]=f.selected,g+=1;e.container.addClass("finished"),h.append(b("<p></p>").text("Please wait a second, we’re making those "+g+" answers productive.").prepend('<img src="/static/images/ajax.gif" alt="" width="16" height="16"/> ')),b("#wizard_now").fadeOut("fast"),c.html.fadeOut("fast",function(){h.hide().insertAfter(c.html).fadeIn("fast"),c.html.detach(),a.location.href="?"+b.param(d)})}function g(a,c){var d=b('<ol class="wizcount"/>');e.current=c,e.container=a,a.empty().append(d).append(c.render()).one("question.answered",function(){b(this).after(b('<p class="buttonset" id="wizard_now"><button type="button">Enough questions! Search now.</button></p>').find("button").on("click",function(){f(e.current)}).end().hide().slideDown())}).on("question.answered",function(c,f){d.append(b("<li></li>").attr("title",f.text).tooltip().html(f.answers[f.selected]).hide().slideDown().on("click",function(){if(a.is(".finished"))return!1;var c=e.current,d=b(this);d.add(d.nextAll("li")).remove(),e.current=f,f.render().hide().insertAfter(c.html).fadeIn("fast"),c.html.detach()}))})}var e={current:null,addAnswer:function(a,b,c){this.answers[a]=b||a,this.next[a]=c},setNextForAnswer:function(a,b){this.next[a]=b},render:function(){if(!this.html){var a=this,c=0;a.html=b('<fieldset id="'+a.id+'" class="question"></fieldset>').append("<legend>"+a.text+"</legend>").data("q",a),b.each(a.answers,function(d,e){c+=1;if(d==="_number"){var f=b('<input type="number"/>').val(e[1]||0),g=b("<div></div>").slider({min:e[1]||0,max:e[2]||100,change:function(){f.val(b(this).slider("value"))},slide:function(){f.val(b(this).slider("value"))}});a.html.append(b('<div class="number"><p></p><p><button type="button"></button></p></div>').addClass("answer answer_"+c).find("button").html(e[0]).on("click tap",function(){a.select(g.slider("value"),a.next[d])}).end().find("p:eq(0)").append(f).append(g).end())}else if(d==="_text"){var h=b('<input type="text"/>').on("keypress",function(a){if(a.which===13)return b(this).next().click(),!1});a.html.append(b('<p class="text"><button type="button"></button></p>').find("button").html(e).before(h).on("click tap",function(){a.select(h.val(),a.next[d])}).end().addClass("answer answer_"+c))}else a.html.append(b('<p><button type="button"></button></p>').find("button").html(e).on("click tap",function(){a.select(d,a.next[d])}).end().addClass("answer answer_"+c))})}return this.html},select:function(a,b){var c=this;c.selected=a,c.html.trigger("question.answered",c),b?(c.html.fadeOut("fast",function(){var a=b.render();e.current=b,a.trigger("question.next",{prev:c,next:b}),a.hide().insertAfter(c.html).fadeIn("fast"),c.html.detach()}),b.prev=c):f(c)}};d.prototype=e;var h=new d("swallow","What’s the airspeed velocity of an unladen swallow?",{1:"An African, or",2:"A European Swallow?"}),i=new d("region","Where does the character appear usually?",{Africa:"Africa <small>(without Arabic)</small>",America:"America <small>(originally, <i>e. g.</i> Cherokee, not Latin)</small>",Europe:"Europe <small>(Latin, Cyrillic, …)</small>",Middle_East:"Middle East",Central_Asia:"Central Asia",East_Asia:"East Asia <small>(Chinese, Korean, Japanese, …)</small>",South_Asia:"South Asia <small>(Indian)</small>","Southeast Asia":"Southeast Asia <small>(Thai, Khmer, …)</small>",Philippines:"Philippines, Indonesia, Oceania",n:"Nowhere specific","":"I don’t know"}),j=new d("number","Is it a number of any kind?",{1:"Yes",0:"No","":"I don’t know"}),k=new d("case","Has the character a case (upper, lower, title)?",{l:"Yes, it’s lowercase",u:"Yes, it’s uppercase",t:"Yes, it’s titlecase",y:"Yes, but I don’t know the case",n:"No, it’s uncased","":"I don’t know"}),l=new d("symbol","Is the character some kind of symbol or dingbat?",{s:"Yes <small>(It isn’t part of usually written text)</small>",c:"No <small>(But it is some kind of control character)</small>",t:"No <small>(It may appear in text, like letters or punctuation)</small>","":"I don’t know"}),m=new d("punctuation","Is the character some kind of punctuation?",{1:"Yes",0:"No","":"I don’t know"}),n=new d("incomplete","Is the character incomplete on its own, like a diacritic sign?",{1:"Yes <small>(It’s usually found together with another character)</small>",0:"No <small>(It stands on its own)</small>","":"I don’t know"}),o=new d("composed","Is the character composed of two others?",{1:"Yes <small>(It is based on two or more other characters)</small>",2:"Sort of <small>(It’s got some quiggly lines or dots, like “Ä” or “ٷ”)</small>",0:"No <small>(It is a genuine character)</small>","":"I don’t know"}),p=new d("confuse","Off the top of your head, can the character be confused with another one?",{1:"Yes <small>(Like latin “A” and greek “Α”, alpha)</small>","":"No <small>(I have no such pair in mind)</small>"}),q=new d("archaic","Is it an archaic character or is it in use today?",{1:"Yep, noone would use that anymore!",0:"Nah, seen it yesterday in the newspaper","":"I don’t know"}),r=new d("strokes","Do you know the number of strokes the character has?",{_number:["This much",1,64],"":"Nope, never counted them"}),s=new d("def","Do you happen to know the meaning of the character?",{_text:"This is (part of) what I’m looking for","":"I don’t speak that language"});i.setNextForAnswer("Africa",j),i.setNextForAnswer("America",j),i.setNextForAnswer("Europe",j),i.setNextForAnswer("Middle_East",j),i.setNextForAnswer("Central_Asia",j),i.setNextForAnswer("South_Asia",j),i.setNextForAnswer("Southeast_Asia",j),i.setNextForAnswer("Philippines",j),i.setNextForAnswer("n",l),i.setNextForAnswer("",l),i.setNextForAnswer("East_Asia",s),s.setNextForAnswer("_text",r),s.setNextForAnswer("",r),r.setNextForAnswer("_number",o),r.setNextForAnswer("",o),j.setNextForAnswer(0,l),j.setNextForAnswer("",l),l.setNextForAnswer("t",m),l.setNextForAnswer("",m),m.setNextForAnswer(1,q),m.setNextForAnswer(0,k),m.setNextForAnswer("",k),k.setNextForAnswer("l",o),k.setNextForAnswer("u",o),k.setNextForAnswer("t",o),k.setNextForAnswer("y",o),k.setNextForAnswer("n",o),k.setNextForAnswer("",o),o.setNextForAnswer(1,q),o.setNextForAnswer(2,q),o.setNextForAnswer(0,n),o.setNextForAnswer("",n),n.setNextForAnswer(1,q),n.setNextForAnswer(0,q),n.setNextForAnswer("",q),q.setNextForAnswer(1,p),q.setNextForAnswer(0,p),q.setNextForAnswer("",p),g(b("#wizard_container"),i)})(this,jQuery);