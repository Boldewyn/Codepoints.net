require(["jquery","components/gettext"],function(e,t){function r(e,t,n){var r=this;r.id=e,r.text=t,r.prev=null,r.next={},r.answers=n||{},r.selected=null,r.html=null}function s(t){t.html.trigger("question.finish",t);var r={_wizard:1},s=t,o=0,u=e('<fieldset id="wizard_finish"><legend>'+n("Finished!")+"</legend>"+"</fieldset>");t.selected!==null&&(r[t.id]=t.selected,o+=1);while(s.prev)s=s.prev,r[s.id]=s.selected,o+=1;i.container.addClass("finished"),u.append(e("<p></p>").text(n("Please wait a second, we’re making those %s answers productive.",o)).prepend('<img src="/static/images/ajax.gif" alt="" width="16" height="16"/> ')),e("#wizard_now").fadeOut("fast"),t.html.fadeOut("fast",function(){u.hide().insertAfter(t.html).fadeIn("fast"),t.html.detach(),window.location.href="?"+e.param(r)})}function o(t,r){var o=e('<ol class="wizcount"/>');i.current=r,i.container=t,t.empty().append(o).append(r.render()).one("question.answered",function(){e(this).after(e('<p class="buttonset" id="wizard_now"><button type="button">'+n("Enough questions! Search now.")+"</button>"+"</p>").find("button").on("click",function(){s(i.current)}).end().hide().slideDown())}).on("question.answered",function(n,r){o.append(e("<li></li>").attr("title",r.text).tooltip().html(r.answers[r.selected]).hide().slideDown().on("click",function(){if(t.is(".finished"))return!1;var n=i.current,s=e(this);s.add(s.nextAll("li")).remove(),i.current=r,r.render().hide().insertAfter(n.html).fadeIn("fast"),n.html.detach()}))})}var n=t.gettext,i={current:null,addAnswer:function(e,t,n){this.answers[e]=t||e,this.next[e]=n},setNextForAnswer:function(e,t){this.next[e]=t},render:function(){if(!this.html){var t=this,n=0;t.html=e('<fieldset id="'+t.id+'" class="question"></fieldset>').append("<legend>"+t.text+"</legend>").data("q",t),e.each(t.answers,function(r,i){n+=1;if(r==="_number"){var s=e('<input type="number"/>').val(i[1]||0),o=e("<div></div>").slider({min:i[1]||0,max:i[2]||100,change:function(){s.val(e(this).slider("value"))},slide:function(){s.val(e(this).slider("value"))}});t.html.append(e('<div class="number"><p></p><p><button type="button"></button></p></div>').addClass("answer answer_"+n).find("button").html(i[0]).on("click tap",function(){t.select(o.slider("value"),t.next[r])}).end().find("p:eq(0)").append(s).append(o).end())}else if(r==="_text"){var u=e('<input type="text"/>').on("keypress",function(t){if(t.which===13)return e(this).next().click(),!1});t.html.append(e('<p class="text"><button type="button"></button></p>').find("button").html(i).before(u).on("click tap",function(){t.select(u.val(),t.next[r])}).end().addClass("answer answer_"+n))}else t.html.append(e('<p><button type="button"></button></p>').find("button").html(i).on("click tap",function(){t.select(r,t.next[r])}).end().addClass("answer answer_"+n))})}return this.html},select:function(e,t){var n=this;n.selected=e,n.html.trigger("question.answered",n),t?(n.html.fadeOut("fast",function(){var e=t.render();i.current=t,e.trigger("question.next",{prev:n,next:t}),e.hide().insertAfter(n.html).fadeIn("fast"),n.html.detach()}),t.prev=n):s(n)}};r.prototype=i;var u=new r("swallow",n("What’s the airspeed velocity of an unladen swallow?"),{1:n("An African, or"),2:n("A European Swallow?")}),a=new r("region",n("Where does the character appear usually?"),{Africa:n("Africa <small>(without Arabic)</small>"),America:n("America <small>(originally, <i>e. g.</i> Cherokee, not Latin)</small>"),Europe:n("Europe <small>(Latin, Cyrillic, …)</small>"),Middle_East:n("Middle East"),Central_Asia:n("Central Asia"),East_Asia:n("East Asia <small>(Chinese, Korean, Japanese, …)</small>"),South_Asia:n("South Asia <small>(Indian)</small>"),"Southeast Asia":n("Southeast Asia <small>(Thai, Khmer, …)</small>"),Philippines:n("Philippines, Indonesia, Oceania"),n:n("Nowhere specific"),"":n("I don’t know")}),f=new r("number",n("Is it a number of any kind?"),{1:n("Yes"),0:n("No"),"":n("I don’t know")}),l=new r("case",n("Has the character a case (upper, lower, title)?"),{l:n("Yes, it’s lowercase"),u:n("Yes, it’s uppercase"),t:n("Yes, it’s titlecase"),y:n("Yes, but I don’t know the case"),n:n("No, it’s uncased"),"":n("I don’t know")}),c=new r("symbol",n("Is the character some kind of symbol or dingbat?"),{s:n("Yes <small>(It isn’t part of usually written text)</small>"),c:n("No <small>(But it is some kind of control character)</small>"),t:n("No <small>(It may appear in text, like letters or punctuation)</small>"),"":n("I don’t know")}),h=new r("punctuation",n("Is the character some kind of punctuation?"),{1:n("Yes"),0:n("No"),"":n("I don’t know")}),p=new r("incomplete",n("Is the character incomplete on its own, like a diacritic sign?"),{1:n("Yes <small>(It’s usually found together with another character)</small>"),0:n("No <small>(It stands on its own)</small>"),"":n("I don’t know")}),d=new r("composed",n("Is the character composed of two others?"),{1:n("Yes <small>(It is based on two or more other characters)</small>"),2:n("Sort of <small>(It’s got some quiggly lines or dots, like “Ä” or “ٷ”)</small>"),0:n("No <small>(It is a genuine character)</small>"),"":n("I don’t know")}),v=new r("confuse",n("Off the top of your head, can the character be confused with another one?"),{1:n("Yes <small>(Like latin “A” and greek “Α”, alpha)</small>"),"":n("No <small>(I have no such pair in mind)</small>")}),m=new r("archaic",n("Is it an archaic character or is it in use today?"),{1:n("Yep, noone would use that anymore!"),0:n("Nah, seen it yesterday in the newspaper"),"":n("I don’t know")}),g=new r("strokes",n("Do you know the number of strokes the character has?"),{_number:[n("This much"),1,64],"":n("Nope, never counted them")}),y=new r("def",n("Do you happen to know the meaning of the character?"),{_text:n("This is (part of) what I’m looking for"),"":n("I don’t speak that language")});a.setNextForAnswer("Africa",f),a.setNextForAnswer("America",f),a.setNextForAnswer("Europe",f),a.setNextForAnswer("Middle_East",f),a.setNextForAnswer("Central_Asia",f),a.setNextForAnswer("South_Asia",f),a.setNextForAnswer("Southeast_Asia",f),a.setNextForAnswer("Philippines",f),a.setNextForAnswer("n",c),a.setNextForAnswer("",c),a.setNextForAnswer("East_Asia",y),y.setNextForAnswer("_text",g),y.setNextForAnswer("",g),g.setNextForAnswer("_number",d),g.setNextForAnswer("",d),f.setNextForAnswer(0,c),f.setNextForAnswer("",c),c.setNextForAnswer("t",h),c.setNextForAnswer("",h),h.setNextForAnswer(1,m),h.setNextForAnswer(0,l),h.setNextForAnswer("",l),l.setNextForAnswer("l",d),l.setNextForAnswer("u",d),l.setNextForAnswer("t",d),l.setNextForAnswer("y",d),l.setNextForAnswer("n",d),l.setNextForAnswer("",d),d.setNextForAnswer(1,m),d.setNextForAnswer(2,m),d.setNextForAnswer(0,p),d.setNextForAnswer("",p),p.setNextForAnswer(1,m),p.setNextForAnswer(0,m),p.setNextForAnswer("",m),m.setNextForAnswer(1,v),m.setNextForAnswer(0,v),m.setNextForAnswer("",v),o(e("#wizard_container"),a)}),define("wizard",function(){});